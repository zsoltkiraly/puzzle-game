function setCookie(a,b,c){var d,e;c.expirationDate?(d=new Date,d.setTime(d.getTime()+24*c.expirationDate*60*60*1e3),e="; expires="+d.toGMTString()):e="",document.cookie=b+"="+a+e+"; path=/"}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0,e=c.length;e>d;d++){for(var f=c[d];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return""}var forEach=function(a,b,c){var d=0;if(len=a.length,len>0)for(;d<len;d++)b.call(c,d,a[d])},config={expirationDate:60},puzzleGame=function(){function a(a){return a=a||window.event,"buttons"in a?a.buttons:void 0}function b(){var a=document.querySelector(".select"),b=document.querySelector(".select-background"),c=document.querySelector(".select-game");if(a){var d=0,e=0,f="bear-game-area",g="shark-game-area",h="elephant-game-area",i=document.querySelector(".restart");"true"===getCookie(f)&&(c.classList.add("finish"),c.innerHTML='<span data-animal="'+f+'">Finish</span>'),"true"===getCookie(f)&&"true"===getCookie(g)&&"true"===getCookie(h)&&(i.classList.add("show"),i.addEventListener("click",function(){i.classList.remove("show"),setCookie(!1,f,config),setCookie(!1,g,config),setCookie(!1,h,config),location.reload()},!1)),a.addEventListener("mousedown",function(b){b.preventDefault(),a.classList.add("catch"),d=b.clientY},!1),a.addEventListener("mousemove",function(b){b.preventDefault(),a.classList.contains("catch")&&(e=d-b.clientY)},!1),a.addEventListener("mouseup",function(d){function i(a){"true"===getCookie(a)&&(c.classList.add("finish"),c.innerHTML='<span data-animal="'+a+'">Finish</span>')}d.preventDefault(),a.classList.remove("catch");var j=parseFloat(a.getAttribute("rotate-id")),k=j+1,l=j-1;e>50&&(c.classList.remove("finish"),c.innerHTML="<span>Select puzzle</span>",3>j&&(a.setAttribute("rotate-id",k),a.classList.remove("rotate"+j),a.classList.add("rotate"+k),a.classList.remove("plus")),3==j&&(a.setAttribute("rotate-id",k),a.classList.remove("rotate"+j),a.classList.add("rotate"+k),a.classList.add("plus"),setTimeout(function(){a.setAttribute("rotate-id",1),a.classList.remove("rotate4"),a.classList.add("rotate1")},300),setTimeout(function(){a.classList.remove("plus")},350)),1==j?(b.style.backgroundImage="url('images/savannah.jpg')",c.setAttribute("data-class","elephant-game-area"),i(h)):2==j?(b.style.backgroundImage="url('images/under_the_sea.jpg')",c.setAttribute("data-class","shark-game-area"),i(g)):3==j&&(b.style.backgroundImage="url('images/forest.jpg')",c.setAttribute("data-class","bear-game-area"),i(f))),-50>e&&(c.classList.remove("finish"),c.innerHTML="<span>Select puzzle</span>",j>1&&(a.setAttribute("rotate-id",l),a.classList.remove("rotate"+j),a.classList.add("rotate"+l),a.classList.remove("minus")),1==j&&(a.classList.add("minus"),a.setAttribute("rotate-id",4),a.classList.remove("rotate1"),a.classList.add("rotate4"),setTimeout(function(){a.classList.remove("rotate4"),a.classList.add("rotate3"),a.setAttribute("rotate-id",3),a.classList.remove("minus")},50)),2==j?(b.style.backgroundImage="url('images/forest.jpg')",c.setAttribute("data-class","bear-game-area"),i(f)):3==j?(b.style.backgroundImage="url('images/savannah.jpg')",c.setAttribute("data-class","elephant-game-area"),i(h)):(1==j||4==j)&&(b.style.backgroundImage="url('images/under_the_sea.jpg')",c.setAttribute("data-class","shark-game-area"),i(g)))},!1)}}function c(){var a=document.querySelectorAll(".back");forEach(a,function(a,b){b.addEventListener("click",function(){location.reload()},!1)})}function d(){var a=document.querySelector(".select-game-area");setTimeout(function(){a.classList.remove("loading")},1e3),setTimeout(function(){a.classList.add("load")},2e3)}function e(b,c){var d=b.querySelectorAll(".puzzle-element");window.addEventListener("keydown",function(a){var c=b.querySelector(".puzzle-element.catch");if(c&&32==a.keyCode){var d=parseFloat(c.getAttribute("rotate-id")),e=d+1;4>d&&(c.setAttribute("rotate-id",e),c.classList.remove("rotate"+d),c.classList.add("rotate"+e)),4==d&&(c.setAttribute("rotate-id",e),c.classList.remove("rotate"+d),c.classList.add("rotate"+e),setTimeout(function(){c.setAttribute("rotate-id",1),c.classList.remove("rotate5"),c.classList.add("rotate1")},300))}},!1),forEach(d,function(e,f){function g(a,c){function d(a){a.preventDefault();var c=b.querySelector(".puzzle-element.catch");if(c){var d=a.clientX,e=a.clientY;c.style.top=e-j+"px",c.style.left=d-i+"px"}}a.preventDefault(),c.classList.contains("active")?a.preventDefault():(i=a.clientX-c.getBoundingClientRect().left,j=a.clientY-c.getBoundingClientRect().top,c.classList.add("catch"),window.addEventListener("mousemove",function(a){d(a)},!1))}function h(a){a.preventDefault();var e=b.querySelectorAll(".puzzle-area"),g=b.querySelector(".puzzle-element.catch");g&&forEach(e,function(a,e){function f(){var a=parseInt(g.getAttribute("data-x")),b=parseInt(g.getAttribute("data-y"));g.style.top=b+"px",g.style.left=a+"px",g.classList.add("return"),setTimeout(function(){g.classList.remove("return")},200)}var h=parseFloat(e.getAttribute("area-id")),i=(e.offsetWidth,e.offsetHeight,g.getBoundingClientRect().top),j=g.getBoundingClientRect().left,k=e.getBoundingClientRect().top,l=e.getBoundingClientRect().left;if(1==parseFloat(g.getAttribute("rotate-id")))if(i>=k-30&&j>=l-30&&k+30>=i&&l+30>=j){if(h==parseFloat(g.getAttribute("puzzle-id"))){g.style.top=k+"px",g.style.left=l+"px",g.classList.add("active","stars"),setTimeout(function(){g.classList.remove("stars")},500);var m=b.querySelectorAll(".puzzle-element.active");m.length==d.length&&setCookie(!0,c.className,config)}}else h==parseInt(g.getAttribute("puzzle-id"))&&f();else f()}),f.classList.remove("catch")}setTimeout(function(){b.classList.remove("disabled"),f.classList.remove("start")},2e3),setTimeout(function(){f.classList.remove("transition"),f.setAttribute("data-x",f.getBoundingClientRect().left),f.setAttribute("data-y",f.getBoundingClientRect().top)},2500);var i=0,j=0;f.addEventListener("mousedown",function(b){var d=this;if(1===a(b)){g(b,d);var e=c.querySelector(".points");if(e){var f=parseFloat(e.innerHTML);e.innerHTML=f+1}}},!1),window.addEventListener("mouseup",function(a){h(a)},!1)})}return{puzzle:e,select:b,back:c,load:d}}();window.addEventListener("load",function(){puzzleGame.load(),puzzleGame.select(),puzzleGame.back()},!1);